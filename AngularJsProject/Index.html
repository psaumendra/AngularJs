<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Angular JS Forms1</title>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular-animate.js"></script>
    <script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.14.3.js"></script>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    
</head>

<body>
    <h2>AngularJS Sample Application1</h2>
    <h1>Depts</h1>
    <div ng-app="mainApp">
        <div ng-controller="shapeController">
            <!--<p>{{message}} <br /> {{type}} </p>-->
            <table border="1">
                <thead>
                    <tr><th>Depts</th><th>Dept Id</th></tr>
                </thead>
                <tr ng-repeat="d in depts">
                    <td>{{d.DName}}</td>
                    <td>{{d.did}}</td>
                </tr>
            </table>
        </div>
        <h1>Teachers</h1>
        <div ng-controller="circleController">
            <p>{{message}} <br /> {{type}} </p>
        </div>

        <div ng-controller="squareController">
            <p>{{message}} <br /> {{type}} </p>
        </div>


    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>

    <script>
        var mainApp = angular.module("mainApp", []);

        function fetch($http, $scope) {

            $http({
                method: 'GET',
                url: 'http://localhost:1154/api/depts'
            }).then(function successCallback(response) {
                console.log(response);
                $scope.depts = response.data.depts;
            }, function errorCallback(response) {
                console.log(response.statusText);
            });
        }
        mainApp.controller("shapeController", function ($scope, $http) {
            fetch($http, $scope);
            //$scope.DName = $scope.details.depts['DName'];
            //$scope.did = $scope.details.depts['did'];
        });

        mainApp.controller("circleController", function ($scope) {
            $scope.message = "In circle controller";
        });

        mainApp.controller("squareController", function ($scope) {
            $scope.message = "In square controller";
            $scope.type = "Square";
        });

    </script>

</body>
</html>